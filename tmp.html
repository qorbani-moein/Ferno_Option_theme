<script>
  addEventListener("load", (event) => {
    // Get the product count
    var cart_product_count = document.getElementsByClassName(
      "bdt-wc-product-inner"
    ).length;
    // Create HTML markup for the product quantity
    var quantity = `
          <style>
              .quantity_cart{
                  width: 30%;
                  color: yellow;
                  position: absolute;
                  background: #2c2c2c;
                  left: 0px;
                  top: 0;
                  display: flex;
                  flex-wrap: nowrap;
                  align-content: stretch;
                  justify-content: space-evenly;
                  align-items: center;
                  border: 1px solid yellow;
                  border-radius: 10px;
              }
              .quantity_cart input{
                  width: 50% !important;
                  color: yellow;
                  background: #2c2c2c;
                  padding: 0px;
                  text-align:center;
              }
  
              input::-webkit-outer-spin-button,
              input::-webkit-inner-spin-button {
                  -webkit-appearance: none;
                  margin: 0;
              }
  
              input[type=number] {
                  -moz-appearance: textfield;
              }
          </style>
          <div class="quantity_cart">
              <span>+</span>
              <input class="number_quantity_cart" type="number" name="cart_quantity" min="1" max="10" />
              <span>-</span>
          </div>
      `;
    // Loop through each product and add the quantity markup
    for (var i = 0; i < cart_product_count; i++) {
      document.getElementsByClassName("bdt-wc-product-inner")[i].innerHTML +=
        quantity;
    }
  });
</script>

<script>


setInterval(time_check_frm,1000);

function time_check_frm(){
  try{
    var exist_elem = document.getElementsByClassName("number_quantity_cart").length;
  }catch(e){

  }
  console.log("exist_elem - " + exist_elem);
   if(exist_elem == 0)
    cart_quantity_product();
}

  //Click on + or - quantity
  const click_quantity = (id) => {
    var id_target = id.split("_");
    id_target = id_target[id_target.length-1];
    
    
    if (id.search("plus")>0){
      document.getElementById("quantity_cart_" + id_target).value ++;
    }
    else{
      if(document.getElementById("quantity_cart_" + id_target).value > 0) {
        document.getElementById("quantity_cart_" + id_target).value --;
        if (document.getElementById("quantity_cart_" + id_target).value == 0){
          document.querySelectorAll(".woolentor-cart-product-actions a").style = "display: block !important;";
        }
      }
    }
    document.getElementsByClassName("input-text")[id_target].value = document.getElementById("quantity_cart_" + id_target).value;
    document.getElementsByClassName("button")[1].removeAttribute("disabled");
    document.getElementsByClassName("button")[1].click();


    // console.log("id - " + id);
    // console.log("id_target - " + id_target);
    // console.log("id.search - " + id.search("plus"));
    // document.querySelectorAll("input[type=number]")[id_target] = document.getElementById("quantity_cart_" + id_target).value;
    // tag_input[id_target.slice(-1)].value = document.getElementById(id_target).value;
  }

  function cart_quantity_product (){
    var len_num_product = document.getElementsByClassName("input-text").length;
    var quantity_product = `
      <div class="quantity_cart">
          <span class="quantity_cart_plus" onclick="click_quantity(this.id)" id="quantity_cart_plus_nth">+</span>
          <input class="number_quantity_cart" id="quantity_cart_nth" type="number" name="cart_quantity" min="1" max="10" />
          <span class="quantity_cart_minus" onclick="click_quantity(this.id)" id="quantity_cart_minus_nth">-</span>
      </div>
    `;
    var tag_input = document.querySelectorAll("input[type=number]");
    // console.log(tag_input.length);
    // console.log(tag_input);
    for(var i = 0 ; i < len_num_product ; i++){
        document.getElementsByClassName("woolentor-cart-product-content")[i].innerHTML += quantity_product.split("nth").join(i);
        
        document.getElementById("quantity_cart_" + i).value = tag_input[i].value;

        // document.getElementById("quantity_cart_plus_" + i).onclick= function () {
        //     // document.getElementById("quantity_cart_" + i).value ++;
        //     document.getElementById(event.srcElement.id).value ++;
        //     tag_input[i].value = document.getElementById("quantity_cart_" + i).value;
        //   }
        
        // document.getElementById("quantity_cart_minus_" + i).onclick= function () {
        //   document.getElementById("quantity_cart_" + i).value --;
        //   tag_input[i].value = document.getElementById("quantity_cart_" + i).value;
        // }
    }
  }

  addEventListener("load", (event) => {
    cart_quantity_product();

    // add listener update cart button
    document.getElementsByClassName("button")[1].addEventListener("onclick",cart_quantity_product());

  });

</script>

script function moein_click(){ console.log(moein_click); // Get the WooCommerce
Cart ID var cart_id = 'wc_cart_session_' +
localStorage.getItem('woocommerce_cart_hash'); // Get the item data from the
cart var cart_items = JSON.parse(localStorage.getItem(cart_id)); // Decrease one
item from the cart cart_items[item_id]['quantity']--; // Update the cart
localStorage.setItem(cart_id, JSON.stringify(cart_items)); } script
